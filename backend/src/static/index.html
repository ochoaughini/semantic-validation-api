<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Compare and validate semantic similarity between texts">
    <title>Semantic Validator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Semantic Validation API</h1>
            <p class="subtitle">Compare and validate semantic similarity between texts</p>
        </header>

        <div class="form-container">
            <div class="input-group">
                <label for="inputText">Input Text:</label>
                <textarea 
                    id="inputText" 
                    placeholder="Example: The cat jumped over the fence."
                    aria-describedby="inputCounter"
                ></textarea>
                <div class="char-counter" id="inputCounter">0 characters</div>
            </div>

            <div class="input-group">
                <label for="referenceText">Reference Text:</label>
                <textarea 
                    id="referenceText" 
                    placeholder="Example: The feline leaped across the barrier."
                    aria-describedby="referenceCounter"
                ></textarea>
                <div class="char-counter" id="referenceCounter">0 characters</div>
            </div>

            <div class="button-group">
                <button id="clearButton" class="secondary-button" aria-label="Clear all input fields">Clear</button>
                <button id="validateButton" aria-label="Compare and validate text">
                    <span>Validate</span>
                    <div class="spinner" id="loadingSpinner"></div>
                </button>
            </div>
            
            <div class="result" id="result" aria-live="polite" role="status"></div>
        </div>
    </div>

    <footer>
        <p>© 2025 Augusto Ochoa — 
            <a href="https://github.com/ochoaughini" target="_blank" rel="noopener">GitHub</a> • 
            <a href="https://www.linkedin.com/in/augusto-ochoa" target="_blank" rel="noopener">LinkedIn</a>
        </p>
        <p class="version">Version 1.1.0 | API Status: <span id="apiStatus">Checking...</span></p>
    </footer>

    <!-- Application scripts -->
    <script type="module" src="app.js"></script>
    
    <!-- Character counter script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Character counter functionality
            const inputText = document.getElementById('inputText');
            const referenceText = document.getElementById('referenceText');
            const inputCounter = document.getElementById('inputCounter');
            const referenceCounter = document.getElementById('referenceCounter');
            
            function updateCounter(textarea, counter) {
                const count = textarea.value.length;
                counter.textContent = count + (count === 1 ? ' character' : ' characters');
            }
            
            inputText.addEventListener('input', () => updateCounter(inputText, inputCounter));
            referenceText.addEventListener('input', () => updateCounter(referenceText, referenceCounter));
            
            // Clear button functionality
            document.getElementById('clearButton').addEventListener('click', function() {
                inputText.value = '';
                referenceText.value = '';
                document.getElementById('result').innerHTML = '';
                updateCounter(inputText, inputCounter);
                updateCounter(referenceText, referenceCounter);
            });
            
            // Check API status
            fetch(window.ENV?.apiUrl || 'https://semantic-validation-api.onrender.com' + '/health')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('apiStatus').textContent = 'Online';
                    document.getElementById('apiStatus').className = 'status-online';
                })
                .catch(error => {
                    document.getElementById('apiStatus').textContent = 'Offline';
                    document.getElementById('apiStatus').className = 'status-offline';
                });
        });
    </script>
</body>
</html>
